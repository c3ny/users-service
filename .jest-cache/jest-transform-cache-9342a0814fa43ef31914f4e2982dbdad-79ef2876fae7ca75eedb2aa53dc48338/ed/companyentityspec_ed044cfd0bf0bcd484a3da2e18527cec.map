{"version":3,"sources":["/Users/ysraelmoreno/Documents/codes/fatec/sangue-solidario/users-service/src/application/core/domain/company.entity.spec.ts"],"sourcesContent":["import { Company } from './company.entity';\n\ndescribe('Company Entity', () => {\n  describe('Company creation', () => {\n    it('should create a company with all required properties', () => {\n      const companyData = {\n        id: '123e4567-e89b-12d3-a456-426614174000',\n        cnpj: '12.345.678/0001-90',\n        institutionName: 'Hospital São Lucas',\n        cnes: '1234567',\n        fkUserId: '987e6543-e21b-34d5-a678-426614174111',\n      };\n\n      const company = new Company();\n      Object.assign(company, companyData);\n\n      expect(company.id).toBe(companyData.id);\n      expect(company.cnpj).toBe(companyData.cnpj);\n      expect(company.institutionName).toBe(companyData.institutionName);\n      expect(company.cnes).toBe(companyData.cnes);\n      expect(company.fkUserId).toBe(companyData.fkUserId);\n    });\n\n    it('should handle CNPJ with different formats', () => {\n      const cnpjFormats = [\n        '12.345.678/0001-90',\n        '12345678000190',\n        '12 345 678 0001 90',\n      ];\n\n      cnpjFormats.forEach((cnpj) => {\n        const company = new Company();\n        company.cnpj = cnpj;\n        expect(company.cnpj).toBe(cnpj);\n      });\n    });\n\n    it('should handle different institution names', () => {\n      const institutionNames = [\n        'Hospital São Lucas',\n        'Clínica Médica Central',\n        'Centro de Hematologia e Hemoterapia',\n        'Fundação Pró-Sangue Hemocentro de São Paulo',\n        'Hospital das Clínicas - FMUSP',\n      ];\n\n      institutionNames.forEach((name) => {\n        const company = new Company();\n        company.institutionName = name;\n        expect(company.institutionName).toBe(name);\n      });\n    });\n\n    it('should handle CNES codes', () => {\n      const cnesCodes = ['1234567', '7654321', '0000001', '9999999'];\n\n      cnesCodes.forEach((cnes) => {\n        const company = new Company();\n        company.cnes = cnes;\n        expect(company.cnes).toBe(cnes);\n      });\n    });\n\n    it('should handle foreign key relationships', () => {\n      const userIds = [\n        '123e4567-e89b-12d3-a456-426614174000',\n        '987e6543-e21b-34d5-a678-426614174111',\n        '456f7890-f12c-45e6-b789-426614174222',\n      ];\n\n      userIds.forEach((userId) => {\n        const company = new Company();\n        company.fkUserId = userId;\n        expect(company.fkUserId).toBe(userId);\n      });\n    });\n  });\n\n  describe('Company validation scenarios', () => {\n    it('should create company for blood bank', () => {\n      const company = new Company();\n      company.institutionName = 'Banco de Sangue Central';\n      company.cnpj = '11.222.333/0001-44';\n      company.cnes = '1122334';\n\n      expect(company.institutionName).toContain('Banco de Sangue');\n      expect(company.cnpj).toMatch(/\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}/);\n      expect(company.cnes).toHaveLength(7);\n    });\n\n    it('should create company for hospital', () => {\n      const company = new Company();\n      company.institutionName = 'Hospital Geral da Cidade';\n      company.cnpj = '55.666.777/0001-88';\n      company.cnes = '5566778';\n\n      expect(company.institutionName).toContain('Hospital');\n      expect(company.cnpj).toMatch(/\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}/);\n      expect(company.cnes).toHaveLength(7);\n    });\n\n    it('should create company for clinic', () => {\n      const company = new Company();\n      company.institutionName = 'Clínica de Especialidades Médicas';\n      company.cnpj = '99.888.777/0001-66';\n      company.cnes = '9988776';\n\n      expect(company.institutionName).toContain('Clínica');\n      expect(company.cnpj).toMatch(/\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}/);\n      expect(company.cnes).toHaveLength(7);\n    });\n  });\n\n  describe('Company business rules', () => {\n    it('should maintain referential integrity with user', () => {\n      const userId = '123e4567-e89b-12d3-a456-426614174000';\n      const company = new Company();\n      company.fkUserId = userId;\n\n      expect(company.fkUserId).toBe(userId);\n      expect(company.fkUserId).toMatch(\n        /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,\n      );\n    });\n\n    it('should handle institution names with special characters', () => {\n      const specialNames = [\n        'Hospital São José & Cia',\n        'Clínica Médica - Unidade I',\n        'Centro de Saúde (Filial)',\n        'Fundação Pró-Vida',\n      ];\n\n      specialNames.forEach((name) => {\n        const company = new Company();\n        company.institutionName = name;\n        expect(company.institutionName).toBe(name);\n      });\n    });\n\n    it('should handle edge cases for CNES', () => {\n      const edgeCases = ['0000000', '1111111', '9999999'];\n\n      edgeCases.forEach((cnes) => {\n        const company = new Company();\n        company.cnes = cnes;\n        expect(company.cnes).toBe(cnes);\n        expect(company.cnes).toHaveLength(7);\n      });\n    });\n  });\n});\n"],"names":["describe","it","companyData","id","cnpj","institutionName","cnes","fkUserId","company","Company","Object","assign","expect","toBe","cnpjFormats","forEach","institutionNames","name","cnesCodes","userIds","userId","toContain","toMatch","toHaveLength","specialNames","edgeCases"],"mappings":"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"}