{"version":3,"sources":["/Users/ysraelmoreno/Documents/codes/fatec/sangue-solidario/users-service/src/test-setup.ts"],"sourcesContent":["// Global test setup and utilities\nimport { Test, TestingModule } from '@nestjs/testing';\n\n// Global test timeout\njest.setTimeout(10000);\n\n// Mock console methods to reduce noise in test output\nglobal.console = {\n  ...console,\n  log: jest.fn(),\n  debug: jest.fn(),\n  info: jest.fn(),\n  warn: jest.fn(),\n};\n\n// Utility function to create test modules more efficiently\nexport const createTestModule = async (\n  providers: any[],\n): Promise<TestingModule> => {\n  return Test.createTestingModule({\n    providers,\n  }).compile();\n};\n\n// Common mock factories\nexport const createMockRepository = () => ({\n  save: jest.fn(),\n  findById: jest.fn(),\n  findByEmail: jest.fn(),\n  findByUserId: jest.fn(),\n  update: jest.fn(),\n});\n\nexport const createMockUseCase = () => ({\n  execute: jest.fn(),\n});\n\nexport const createMockHashRepository = () => ({\n  hash: jest.fn(),\n  compare: jest.fn(),\n});\n\n// Performance optimization: Clear mocks after each test instead of recreating them\nafterEach(() => {\n  jest.clearAllMocks();\n});\n"],"names":["createMockHashRepository","createMockRepository","createMockUseCase","createTestModule","jest","setTimeout","global","console","log","fn","debug","info","warn","providers","Test","createTestingModule","compile","save","findById","findByEmail","findByUserId","update","execute","hash","compare","afterEach","clearAllMocks"],"mappings":"AAAA,kCAAkC;;;;;;;;;;;;QAqCrBA;eAAAA;;QAZAC;eAAAA;;QAQAC;eAAAA;;QAjBAC;eAAAA;;;yBAfuB;AAEpC,sBAAsB;AACtBC,KAAKC,UAAU,CAAC;AAEhB,sDAAsD;AACtDC,OAAOC,OAAO,GAAG;IACf,GAAGA,OAAO;IACVC,KAAKJ,KAAKK,EAAE;IACZC,OAAON,KAAKK,EAAE;IACdE,MAAMP,KAAKK,EAAE;IACbG,MAAMR,KAAKK,EAAE;AACf;AAGO,MAAMN,mBAAmB,OAC9BU;IAEA,OAAOC,aAAI,CAACC,mBAAmB,CAAC;QAC9BF;IACF,GAAGG,OAAO;AACZ;AAGO,MAAMf,uBAAuB,IAAO,CAAA;QACzCgB,MAAMb,KAAKK,EAAE;QACbS,UAAUd,KAAKK,EAAE;QACjBU,aAAaf,KAAKK,EAAE;QACpBW,cAAchB,KAAKK,EAAE;QACrBY,QAAQjB,KAAKK,EAAE;IACjB,CAAA;AAEO,MAAMP,oBAAoB,IAAO,CAAA;QACtCoB,SAASlB,KAAKK,EAAE;IAClB,CAAA;AAEO,MAAMT,2BAA2B,IAAO,CAAA;QAC7CuB,MAAMnB,KAAKK,EAAE;QACbe,SAASpB,KAAKK,EAAE;IAClB,CAAA;AAEA,mFAAmF;AACnFgB,UAAU;IACRrB,KAAKsB,aAAa;AACpB"}